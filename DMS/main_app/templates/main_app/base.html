{% load static %}
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Delta Management System</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'plugins/fontawesome-free/css/all.min.css'%} ">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Tempusdominus Bbootstrap 4 -->
    <link rel="stylesheet"
        href="{% static 'plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css'%} ">
    <!-- iCheck -->
    <link rel="stylesheet" href="{% static 'plugins/icheck-bootstrap/icheck-bootstrap.min.css'%} ">
    
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'dist/css/adminlte.min.css'%} ">
    <!-- overlayScrollbars -->
    <link rel="stylesheet" href="{% static 'plugins/overlayScrollbars/css/OverlayScrollbars.min.css'%} ">
    <!-- Daterange picker -->
    <link rel="stylesheet" href="{% static 'plugins/daterangepicker/daterangepicker.css'%} ">
    
    <!-- Google Font: Source Sans Pro -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
    <!-- SweetAlert2 -->
    <link href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bootstrap-4/bootstrap-4.css" rel="stylesheet">
    <!-- Mouse Movement Animation -->
    <style>
        .interactive-element {
            position: relative;
            transition: all 0.3s ease;
        }

        .highlight-line {
            position: absolute;
            pointer-events: none;
            z-index: 2;
            background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.15), transparent);
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.2s ease;
        }

        .highlight-line.vertical {
            width: 2px;
            height: 100%;
            top: 0;
            transform: scaleY(0);
        }

        .highlight-line.horizontal {
            height: 2px;
            width: 100%;
            left: 0;
            transform: scaleX(0);
        }

        .highlight-line.active {
            opacity: 1;
            transform: scale(1);
        }
    </style>
    <!-- Modern Sidebar Styles -->
    <style>
        /* Sidebar Base Styles */
        .main-sidebar {
            background: #7364ff !important;
            border-right: 1px solid rgba(0, 0, 0, 0.08);
            box-shadow: 2px 0 8px rgba(0,0,0,0.03);
            transition: all 0.3s ease;
        }

        /* Brand/Logo Area */
        .brand-link {
            border-bottom: 1px solid rgba(0, 0, 0, 0.08) !important;
            padding: 1.2rem 1rem !important;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.4);
        }

        .brand-link:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .brand-link .brand-image {
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            margin-left: 0.5rem;
        }

        .brand-text {
            font-weight: 500 !important;
            letter-spacing: 0.5px;
            color: #000000 !important;
        }

        /* User Panel */
        .user-panel {
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
            padding: 1rem 0.5rem !important;
            background: rgba(255, 255, 255, 0.4);
        }

        .user-panel .image img {
            border: 2px solid rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .user-panel:hover .image img {
            border-color: rgba(0, 0, 0, 0.2);
        }

        .user-panel .info a {
            color: #000000 !important;
            font-weight: 500;
            letter-spacing: 0.3px;
        }

        /* Navigation Items */
        .nav-sidebar .nav-item {
            margin-bottom: 2px;
        }

        .nav-sidebar .nav-link {
            padding: 0.8rem 1rem;
            border-radius: 8px;
            margin: 0 0.5rem;
            transition: all 0.2s ease;
            color: #000000 !important;
        }

        .nav-sidebar .nav-link:hover {
            background: rgba(0, 0, 0, 0.04);
            transform: translateX(4px);
            color: #444444 !important;
        }

        .nav-sidebar .nav-link.active {
            background: rgba(255, 255, 255, 0.5) !important;
            box-shadow: 0 2px 4px rgba(0,0,0,0.03);
            color: #333333 !important;
        }

        .nav-sidebar .nav-link p {
            font-weight: 500;
            font-size: 0.95rem;
            color: inherit;
        }

        .nav-sidebar .nav-icon {
            color: #000000;
            font-size: 1.1rem;
            width: 1.6rem !important;
            text-align: center;
            margin-right: 0.5rem;
            transition: all 0.2s ease;
        }

        .nav-sidebar .nav-link:hover .nav-icon {
            color: #444444;
        }

        /* Treeview/Submenu */
        .nav-treeview {
            padding: 0.5rem 0 0.5rem 1rem;
            margin-left: 0.7rem;
            border-left: 1px solid rgba(0, 0, 0, 0.08);
        }

        .nav-treeview .nav-link {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .nav-treeview .nav-icon {
            font-size: 0.8rem;
        }

        /* Angle Icon in Treeview */
        .nav-sidebar .nav-link>.right, 
        .nav-sidebar .nav-link>p>.right {
            top: 0.9rem;
            right: 1rem;
            transition: all 0.2s ease;
        }

        .nav-sidebar .nav-link.active>.right, 
        .nav-sidebar .nav-link.active>p>.right {
            transform: rotate(-90deg);
        }

        /* Scrollbar Styling */
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.03);
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
        }

        .sidebar::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.15);
        }

        /* Active Menu Indicator */
        .nav-sidebar .nav-link.active::before {
            content: '';
            position: absolute;
            left: -0.5rem;
            top: 50%;
            transform: translateY(-50%);
            height: 1.5rem;
            width: 3px;
            background: #666666;
            border-radius: 0 2px 2px 0;
            opacity: 0.4;
        }

        /* Hover Effects */
        .nav-sidebar .nav-item:hover>.nav-link:not(.active) {
            background: rgba(0, 0, 0, 0.03);
        }

        /* Collapsed Sidebar Styles */
        .sidebar-mini.sidebar-collapse .main-sidebar:hover {
            box-shadow: 4px 0 12px rgba(0,0,0,0.08);
        }

        .sidebar-mini.sidebar-collapse .nav-sidebar .nav-link {
            margin: 0 0.3rem;
        }
    </style>
    {% block custom_css %}

    {% endblock custom_css %}
</head>

<body class="hold-transition sidebar-mini layout-fixed">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const interactiveElements = '.card, .container-fluid > div, .form-group, .btn, .nav-item, .form-control, .nav-link';
            
            document.querySelectorAll(interactiveElements).forEach(element => {
                element.classList.add('interactive-element');
                
                // Create highlight lines
                const verticalLine = document.createElement('div');
                verticalLine.className = 'highlight-line vertical';
                const horizontalLine = document.createElement('div');
                horizontalLine.className = 'highlight-line horizontal';
                
                element.appendChild(verticalLine);
                element.appendChild(horizontalLine);

                let activeLines = [];
                let animationFrame;

                element.addEventListener('mousemove', function(e) {
                    if (animationFrame) {
                        cancelAnimationFrame(animationFrame);
                    }

                    animationFrame = requestAnimationFrame(() => {
                        const rect = this.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;
                        
                        // Clear previous active lines
                        activeLines.forEach(line => line.classList.remove('active'));
                        activeLines = [];

                        // Determine closest edges and activate corresponding lines
                        if (x < rect.width / 3) {
                            verticalLine.style.left = '0';
                            verticalLine.classList.add('active');
                            activeLines.push(verticalLine);
                        } else if (x > (rect.width * 2/3)) {
                            verticalLine.style.left = 'auto';
                            verticalLine.style.right = '0';
                            verticalLine.classList.add('active');
                            activeLines.push(verticalLine);
                        }

                        if (y < rect.height / 3) {
                            horizontalLine.style.top = '0';
                            horizontalLine.classList.add('active');
                            activeLines.push(horizontalLine);
                        } else if (y > (rect.height * 2/3)) {
                            horizontalLine.style.top = 'auto';
                            horizontalLine.style.bottom = '0';
                            horizontalLine.classList.add('active');
                            activeLines.push(horizontalLine);
                        }
                    });
                });

                element.addEventListener('mouseleave', function() {
                    if (animationFrame) {
                        cancelAnimationFrame(animationFrame);
                    }
                    verticalLine.classList.remove('active');
                    horizontalLine.classList.remove('active');
                });
            });
        });
    </script>

    <div class="wrapper">

        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-white navbar-light">
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a>
                </li>
            </ul>

            <!-- Right navbar links -->
            <ul class="navbar-nav ml-auto">
                <!-- Add your right navbar items here -->
            </ul>
        </nav>
        <!-- /.navbar -->

        <!-- Main Sidebar Container -->
        {% include "main_app/sidebar_template.html" with user=user %}

        <div class="content-wrapper">
            <!-- Content Wrapper. Contains page content -->
            <!-- Content Header (Page header) -->
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="m-0 text-dark">{% block page_title %}{% endblock page_title %}</h1>
                        </div><!-- /.col -->
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active">{{ page_title }}</li>
                            </ol>
                        </div><!-- /.col -->
                    </div><!-- /.row -->
                </div><!-- /.container-fluid -->
            </div>
            <!-- /.content-header -->

            <!-- Main content -->
            <section class="content">
                <div class="container-fluid">
                    {% if messages %}
                    <div id="django-messages" style="display: none;">
                        {% for message in messages %}
                        <div class="message" 
                             data-type="{% if message.tags == 'success' %}success{% else %}error{% endif %}"
                             data-text="{{ message|escapejs }}">
                        </div>
                        {% endfor %}
                    </div>
                    <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            const messageElements = document.querySelectorAll('#django-messages .message');
                            messageElements.forEach(function(element) {
                                Swal.fire({
                                    icon: element.dataset.type,
                                    title: element.dataset.type.charAt(0).toUpperCase() + element.dataset.type.slice(1),
                                    text: element.dataset.text,
                                    toast: true,
                                    position: 'top-end',
                                    showConfirmButton: false,
                                    timer: 3000,
                                    timerProgressBar: true
                                });
                            });
                        });
                    </script>
                    {% endif %}
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                {% if messages %}
                                {% for message in messages %}
                                {% if message.tags == 'success' %}
                                <div class="alert alert-success">
                                    {{message}}
                                </div>
                                {% else %}
                                <div class="alert alert-danger">
                                    {{message}}
                                </div>
                                {% endif %}
                                {% endfor %}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            {% block content %}
            {% endblock content %}
            <!-- /.content -->
        </div>
        <!-- /.content-wrapper -->
        {% include "main_app/footer.html" %}
    </div>
    <!-- ./wrapper -->
    <!-- jQuery -->
    <script src="{% static 'plugins/jquery/jquery.min.js'%} "></script>
    <!-- jQuery UI 1.11.4 -->
    <script src="{% static 'plugins/jquery-ui/jquery-ui.min.js'%} "></script>
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
        $.widget.bridge('uibutton', $.ui.button)
    </script>
    <!-- Bootstrap 4 -->
    <script src="{% static 'plugins/bootstrap/js/bootstrap.bundle.min.js'%} "></script>
    <!-- ChartJS -->
    <script src="{% static 'plugins/chart.js/Chart.min.js'%} "></script>
    <!-- Sparkline -->
    <script src="{% static 'plugins/sparklines/sparkline.js'%} "></script>
    <!-- jQuery Knob Chart -->
    <script src="{% static 'plugins/jquery-knob/jquery.knob.min.js'%} "></script>
    <!-- daterangepicker -->
    <script src="{% static 'plugins/moment/moment.min.js'%} "></script>
    <script src="{% static 'plugins/daterangepicker/daterangepicker.js'%} "></script>
    <!-- Tempusdominus Bootstrap 4 -->
    <script src="{% static 'plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js'%} "></script>
    <!-- overlayScrollbars -->
    <script src="{% static 'plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js'%} "></script>
    <!-- AdminLTE App -->
    <script src="{% static 'dist/js/adminlte.js'%} "></script>
    <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
    <script src="{% static 'dist/js/pages/dashboard.js'%} "></script>
    <!-- AdminLTE for demo purposes -->
    <script src="{% static 'dist/js/demo.js'%} "></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    {% block custom_js %}
    {% endblock custom_js %}
</body>

</html>